module.exports=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/static/",e(e.s="./src/entries/server/index.ts")}({"./src/entries/server/index.ts":function(t,n,e){"use strict";e.r(n);var r=e("express"),o=e.n(r),s=function(t){return'\n<!doctype html>\n<html>\n\t<head>\n\t\t<meta charset="utf-8" />\n\t\t<title>Планирование</title>\n\t\t<link rel="stylesheet" href="/static/bundle.css" />\n\t\t<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">\n\t\t<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"><\/script>\n\t\t<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"><\/script>\n\t\t<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"><\/script>\n\t</head>\n\t<body>\n\t\t<div id="content"></div>\n\t\t<script>\n\t\t\twindow.__INITIAL_STATE__ = '+JSON.stringify(t)+';\n\t\t<\/script>\n\t\t<script src="/static/bundle.js"><\/script>\n\t</body>\n</html>'},i=e("morgan"),a=e.n(i),u=e("path"),c=e("fs"),f=function(t,n,e,r){return new(e||(e=Promise))(function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,a)}u((r=r.apply(t,n||[])).next())})},l=function(t,n){var e,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(t,i)}catch(t){s=[6,t],r=0}finally{e=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},p="../../.plannings/",d=".json";var y=function(){return(y=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};var m=e("minimist");!function(t){var n=void 0===t?{}:t,e=n.app,r=void 0===e?o()():e,i=n.port,m=void 0===i?8080:i;r.use("/static",o.a.static(u.resolve(__dirname,"../public/"))),r.use(a()("tiny")),r.post("/plannings",function(t,n){n.setHeader("Content-Type","application/json; charset=utf-8");var e=y({},t.query,t.body);if(!e.key||!e.data)return n.status(422),void n.send(JSON.stringify({status:"no_params"}));(function(t,n){return f(this,void 0,void 0,function(){return l(this,function(e){return[2,new Promise(function(e,r){~t.indexOf(".")||~t.indexOf("/")||~t.indexOf("\\")?r("Unacceptable symbols in key."):c.open(Object(u.resolve)(__dirname,p,t+d),"w",function(t,o){t?r(t.message):c.write(o,JSON.stringify(n),function(t){t?r(t.message):c.close(o,function(t){t?r(t.message):e()})})})})]})})})(e.key,e.data).then(function(){n.send(JSON.stringify({status:"ok"}))}).catch(function(t){n.status(500),n.send(JSON.stringify({status:"error",message:t}))})}),r.get("/plannings",function(t,n){if(n.setHeader("Content-Type","application/json; charset=utf-8"),!t.query.key)return n.status(422),void n.send(JSON.stringify({status:"no_params"}));(function(t){return f(this,void 0,void 0,function(){return l(this,function(n){return[2,new Promise(function(n,e){~t.indexOf(".")||~t.indexOf("/")||~t.indexOf("\\")?e("Unacceptable symbols in key."):c.open(Object(u.resolve)(__dirname,p,t+d),"r",function(t,r){t?e(t.message):c.readFile(r,{encoding:"utf8"},function(t,r){t?e(t.message):n(JSON.parse(r))})})})]})})})(t.query.key).then(function(t){n.send(JSON.stringify(t))}).catch(function(t){n.status(500),n.send(JSON.stringify({status:"error",message:t}))})}),r.get("/",function(t,n){n.setHeader("Content-Type","text/html; charset=utf-8"),n.send(s({}))}),r.use(function(t,n){n.status(404).send("Page not found!"),console.log("Url not found: "+t.url)}),r.use(function(t,n,e,r){console.log(t.stack),e.status(500).send("Something broke!")}),r.listen(m,function(){console.log("The application started on port "+m+".")})}({port:e.n(m)()(process.argv.slice(2)).port})},express:function(t,n){t.exports=require("express")},fs:function(t,n){t.exports=require("fs")},minimist:function(t,n){t.exports=require("minimist")},morgan:function(t,n){t.exports=require("morgan")},path:function(t,n){t.exports=require("path")}});
//# sourceMappingURL=index.js.map